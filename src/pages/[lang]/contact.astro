---
import BaseLayout from "@layout/BaseLayout.astro";
import Button from "@ui/Button.astro";
import { getTranslation } from "@utils/i18n";
import { executiveData } from "../../data/executives";

// Static paths for language routes
export function getStaticPaths() {
  return [
    { params: { lang: 'ko' } },
    { params: { lang: 'en' } }
  ];
}

// URL 파라미터에서 언어 추출
const { lang } = Astro.params;
const currentLang: 'ko' | 'en' = (lang === 'ko' || lang === 'en') ? lang : 'ko';

// Static site에서는 서버 사이드 폼 처리가 불가능하므로 제거

// FAQ 데이터
const faqData = currentLang === 'ko' ? [
  {
    question: "KSA에 어떻게 가입할 수 있나요?",
    answer: "KSA는 홍콩과기대에 재학 중인 모든 한국 학생에게 자동으로 개방됩니다. 별도의 가입 절차는 필요하지 않습니다."
  },
  {
    question: "행사에 참여하고 싶은데 어떻게 해야 하나요?",
    answer: "KSA 페이스북 그룹과 이메일을 통해 행사 정보를 확인할 수 있습니다. 대부분의 행사는 사전 등록이 필요합니다."
  },
  {
    question: "건의사항이나 문의사항이 있는데 어떻게 연락하나요?",
    answer: "이 페이지 하단의 폼을 통해 문의하실 수 있습니다. 익명 제출도 가능하며, 1주일 내에 답변드립니다."
  },
  {
    question: "KSA 임원진이 되고 싶은데 어떻게 해야 하나요?",
    answer: "매년 3월경에 임원진 선거가 진행됩니다. 페이스북 그룹을 통해 선거 공고를 확인하실 수 있습니다."
  }
] : [
  {
    question: "How can I join KSA?",
    answer: "KSA is automatically open to all Korean students enrolled at HKUST. No separate registration process is required."
  },
  {
    question: "How can I participate in events?",
    answer: "You can check event information through the KSA Facebook group and email. Most events require pre-registration."
  },
  {
    question: "How can I contact KSA with questions or suggestions?",
    answer: "You can contact us through the form at the bottom of this page. Anonymous submissions are also possible, and we will respond within a week."
  },
  {
    question: "How can I become part of the KSA executive committee?",
    answer: "Executive committee elections are held annually around March. You can check election announcements through the Facebook group."
  }
];
---

<BaseLayout lang={currentLang} title={getTranslation('contact.title', currentLang)}>
  <!-- Hero Section -->
  <section class="relative py-20 bg-gradient-to-br from-teal-50 to-blue-50">
    <div class="container mx-auto px-4 pt-header">
      <div class="text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-gray-800 mb-4">
          {getTranslation('contact.title', currentLang)}
        </h1>
        <p class="text-xl text-gray-600 mb-8">
          {getTranslation('contact.subtitle', currentLang)}
        </p>
      </div>
    </div>
  </section>

  <!-- Executive Committee Contact -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">
          {getTranslation('contact.executive.title', currentLang)}
        </h2>
        <p class="text-lg text-gray-600">
          {currentLang === 'ko' 
            ? 'KSA 임원진과 직접 연락하세요' 
            : 'Contact the KSA Executive Committee directly'}
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {executiveData.map((group) => (
          group.executives.slice(0, 3).map((member) => (
            <div class="bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
              <div class="bg-gradient-to-br from-teal-500 to-blue-600 p-6 text-white">
                <h3 class="text-xl font-semibold mb-1">{member.position}</h3>
              </div>
              <div class="p-6">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">{member.name}</h4>
                <p class="text-sm text-gray-500 mb-3">{member.program}</p>
                <a href={`mailto:${member.email}`} class="text-teal-600 hover:text-teal-700 text-sm font-medium">
                  {member.email}
                </a>
              </div>
            </div>
          ))
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-20 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">
          {currentLang === 'ko' ? '자주 묻는 질문' : 'Frequently Asked Questions'}
        </h2>
        <p class="text-lg text-gray-600">
          {currentLang === 'ko' 
            ? 'KSA에 대한 일반적인 질문들입니다' 
            : 'Common questions about KSA'}
        </p>
      </div>
      
      <div class="max-w-4xl mx-auto">
        <div class="space-y-6">
          {faqData.map((faq, index) => (
            <div class="bg-white rounded-xl shadow-lg p-8">
              <h3 class="text-xl font-semibold text-gray-800 mb-4">
                {index + 1}. {faq.question}
              </h3>
              <p class="text-gray-600 leading-relaxed">
                {faq.answer}
              </p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Form Section -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">
          {currentLang === 'ko' ? '문의하기' : 'Send us a message'}
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          {currentLang === 'ko' 
            ? '질문이나 건의사항이 있으시면 아래 폼을 통해 연락해 주세요. 익명 제출도 가능합니다.' 
            : 'If you have any questions or suggestions, please contact us through the form below. Anonymous submissions are also possible.'}
        </p>
      </div>

      <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-200">
          <form action="mailto:jyangca@connect.ust.hk" method="GET" class="space-y-6">
            <!-- Email Field -->
            <div>
              <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                {currentLang === 'ko' ? 'HKUST 이메일 주소 *' : 'HKUST Email Address *'}
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                placeholder={currentLang === 'ko' ? 'yourname@connect.ust.hk' : 'yourname@connect.ust.hk'}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-colors"
              />
              <p class="text-sm text-gray-500 mt-1">
                {currentLang === 'ko' 
                  ? 'HKUST 이메일 주소(@connect.ust.hk)만 허용됩니다' 
                  : 'Only HKUST email addresses (@connect.ust.hk) are accepted'}
              </p>
            </div>

            <!-- Anonymous Checkbox -->
            <div class="flex items-center">
              <input
                type="checkbox"
                id="anonymous"
                name="anonymous"
                class="h-4 w-4 text-teal-600 focus:ring-teal-500 border-gray-300 rounded"
              />
              <label for="anonymous" class="ml-2 block text-sm text-gray-700">
                {currentLang === 'ko' ? '익명으로 제출' : 'Submit anonymously'}
              </label>
            </div>

            <!-- Message Field -->
            <div>
              <label for="suggestion" class="block text-sm font-medium text-gray-700 mb-2">
                {currentLang === 'ko' ? '문의사항/건의사항 *' : 'Inquiry/Suggestion *'}
              </label>
              <textarea
                id="suggestion"
                name="suggestion"
                required
                rows="6"
                placeholder={currentLang === 'ko' 
                  ? '문의사항, 건의사항 또는 피드백을 공유해 주세요...' 
                  : 'Please share your inquiry, suggestion, or feedback...'}
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-colors resize-none"
              ></textarea>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-center">
              <Button type="submit" variant="primary" className="px-8 py-3 text-lg">
                {currentLang === 'ko' ? '문의사항 제출' : 'Submit Inquiry'}
              </Button>
            </div>
          </form>
        </div>

        <!-- Additional Information -->
        <div class="mt-8 text-center">
          <div class="bg-blue-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-blue-800 mb-2">
              {currentLang === 'ko' ? '작동 방식' : 'How it works'}
            </h3>
            <ul class="text-blue-700 space-y-1 text-sm">
              <li>• {currentLang === 'ko' 
                ? '문의사항은 KSA 임원진이 검토합니다' 
                : 'Your inquiry will be reviewed by the KSA executive committee'}</li>
              <li>• {currentLang === 'ko' 
                ? '답변은 1주일 내에 Facebook 그룹에 게시됩니다' 
                : 'Responses will be posted on our Facebook group within a week'}</li>
              <li>• {currentLang === 'ko' 
                ? '익명 제출은 완전히 기밀입니다' 
                : 'Anonymous submissions are completely confidential'}</li>
              <li>• {currentLang === 'ko' 
                ? '모든 종류의 피드백과 건의사항을 환영합니다' 
                : 'We welcome all types of feedback and suggestions'}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
