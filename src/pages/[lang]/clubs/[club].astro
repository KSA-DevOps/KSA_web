---
import BaseLayout from "@layout/BaseLayout.astro";
import { getTranslation } from "@utils/i18n";
import { clubs, getColorValue, type ColorKey } from "../../../data/clubs";

// Static paths for language and club routes
export function getStaticPaths() {
  const paths = [];
  const languages = ["ko", "en"];

  for (const lang of languages) {
    for (const club of clubs) {
      paths.push({
        params: {
          lang: lang,
          club: club.key,
        },
        props: { club },
      });
    }
  }

  return paths;
}

// URL íŒŒë¼ë¯¸í„°ì—ì„œ ì–¸ì–´ì™€ í´ëŸ½ ì •ë³´ ì¶”ì¶œ
const { lang, club: clubKey } = Astro.params;
const { club } = Astro.props;
const currentLang: "ko" | "en" = lang === "ko" || lang === "en" ? lang : "ko";

// 404 ì²˜ë¦¬
if (!club) {
  return Astro.redirect("/404");
}
---

<BaseLayout
  lang={currentLang}
  title={`${club.nameKo} - ${getTranslation("clubs.title", currentLang)}`}
>
  <!-- Breadcrumb -->
  <section class="bg-gray-50 py-4">
    <div class="container mx-auto px-4">
      <nav class="text-sm text-gray-600">
        <a href={`/${currentLang}`} class="hover:text-teal-600"
          >{getTranslation("nav.home", currentLang)}</a
        >
        <span class="mx-2">></span>
        <a href={`/${currentLang}/clubs`} class="hover:text-teal-600"
          >{getTranslation("nav.clubs", currentLang)}</a
        >
        <span class="mx-2">></span>
        <span class="text-gray-800">{club.nameKo}</span>
      </nav>
    </div>
  </section>

  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-teal-50 to-blue-50 py-20">
    <div class="pt-header container mx-auto px-4">
      <div class="text-center">
        <div
          class="mx-auto mb-6 flex h-24 w-24 items-center justify-center rounded-full"
          style={`background-color: ${getColorValue(club.bgColor as ColorKey)}`}
        >
          <span class="text-4xl text-white">{club.emoji}</span>
        </div>
        <h1 class="mb-4 text-4xl font-bold text-gray-800 md:text-6xl">
          {club.nameKo}
        </h1>
        <p class="mb-8 text-xl text-gray-600">
          {club.subtitleEn}
        </p>
      </div>
    </div>
  </section>

  <!-- Club Information -->
  <section class="bg-white py-20">
    <div class="container mx-auto px-4">
      <div class="mx-auto max-w-4xl">
        <!-- Description -->
        <div class="mb-12">
          <h2 class="mb-6 text-3xl font-bold text-gray-800">
            {currentLang === "ko" ? "ë™ì•„ë¦¬ ì†Œê°œ" : "About the Club"}
          </h2>
          <p class="text-lg leading-relaxed text-gray-600">
            {
              currentLang === "ko"
                ? club.descriptionKo ||
                  `${club.nameKo}ëŠ” ${club.subtitleEn} í™œë™ì„ í•˜ëŠ” ë™ì•„ë¦¬ì…ë‹ˆë‹¤.`
                : club.descriptionEn ||
                  `${club.nameKo} is a club focused on ${club.subtitleEn.toLowerCase()} activities.`
            }
          </p>
        </div>

        <!-- Club Details -->
        <div class="mb-12 rounded-xl bg-gray-50 p-8">
          <h3 class="mb-6 text-2xl font-bold text-gray-800">
            {currentLang === "ko" ? "ë™ì•„ë¦¬ ì •ë³´" : "Club Information"}
          </h3>
          <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <div class="rounded-lg bg-white p-6">
              <div class="mb-3 flex items-center">
                <div
                  class="mr-3 flex h-10 w-10 items-center justify-center rounded-full"
                  style={`background-color: ${getColorValue(club.bgColor as ColorKey)}`}
                >
                  <span class="text-lg text-white">{club.emoji}</span>
                </div>
                <h4 class="font-semibold text-gray-800">
                  {currentLang === "ko" ? "ë™ì•„ë¦¬ëª…" : "Club Name"}
                </h4>
              </div>
              <p class="text-gray-600">{club.nameKo}</p>
            </div>

            <div class="rounded-lg bg-white p-6">
              <div class="mb-3 flex items-center">
                <div
                  class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gray-200"
                >
                  <span class="text-lg">ğŸ‘¤</span>
                </div>
                <h4 class="font-semibold text-gray-800">
                  {currentLang === "ko" ? "íšŒì¥" : "President"}
                </h4>
              </div>
              <p class="text-gray-600">{club.president || "-"}</p>
            </div>
          </div>
        </div>

        <!-- Links and Contact -->
        {
          club.link && (
            <div class="rounded-xl bg-gradient-to-r from-teal-50 to-blue-50 p-8">
              <h3 class="mb-6 text-2xl font-bold text-gray-800">
                {currentLang === "ko" ? "ì—°ë½ì²˜ ë° ë§í¬" : "Contact & Links"}
              </h3>
              <div class="flex flex-col gap-4 sm:flex-row">
                <a
                  href={club.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-flex items-center justify-center rounded-lg bg-teal-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-teal-700"
                >
                  <span class="mr-2">ğŸ“·</span>
                  {currentLang === "ko" ? "ì¸ìŠ¤íƒ€ê·¸ë¨ ë³´ê¸°" : "View Instagram"}
                </a>
                <a
                  href={`/${currentLang}/contact`}
                  class="inline-flex items-center justify-center rounded-lg border-2 border-teal-600 px-6 py-3 font-semibold text-teal-600 transition-colors hover:bg-teal-600 hover:text-white"
                >
                  <span class="mr-2">âœ‰ï¸</span>
                  {currentLang === "ko" ? "ê°€ì… ë¬¸ì˜í•˜ê¸°" : "Join Inquiry"}
                </a>
              </div>
            </div>
          )
        }

        <!-- Back to Clubs -->
        <div class="mt-12 text-center">
          <a
            href={`/${currentLang}/clubs`}
            class="inline-flex items-center font-semibold text-teal-600 hover:text-teal-800"
          >
            <span class="mr-2">â†</span>
            {currentLang === "ko" ? "ëª¨ë“  ë™ì•„ë¦¬ ë³´ê¸°" : "View All Clubs"}
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
